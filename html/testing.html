<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Testing</title>
        <link rel="stylesheet" href="../css/testing.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" type="image/x-icon" href="../assets/base/ninjaLogo.png"/>
    </head>
    <body>
    <header>
        <!--left shuriken-->
        <section class="shuriken">
            <img src="../assets/base/Shuriken.png" alt="shuriken">
        </section>

        <!--middle header section-->
        <section class="header-inner-bg">
            <div class="header-img">
                <img src="../assets/base/ninjaLogo.png" alt="ninjaLogo">
            </div>
        </section>

        <!--right shuriken-->
        <section class="shuriken">
            <img src="../assets/base/Shuriken.png" alt="shuriken">
        </section>    </header>
    <main>
<!--        <h1>main body str. divide into 3 parts</h1>-->
        <div class="display">
            <div class="elements">
                <button class="buttons" name="INTEGER" onclick="questionType(name)">Integer</button>
                <button class="buttons" name="BOOLEAN" onclick="questionType(name)">Boolean</button>
                <button class="buttons" name="TEXT" onclick="questionType(name)">Text</button>
                <button class="buttons" name="MCQ" onclick="questionType(name)">MCQ</button>
                <button class="buttons" name="NUMERIC" onclick="questionType(name)">Numeric</button>
                <button type="submit" class="buttons" onclick="displayList()">List</button>
                <button type="submit" class="buttons" onclick="LeaderBoard()">Leaderboard</button>
                <button type="submit" class="buttons">Score</button>
                <button type="submit" class="buttons">Skip</button>
                <button type="submit" class="buttons">Location</button>
                <button type="submit" class="buttons">Answer</button>
                <button type="submit" class="buttons">Start</button>
            </div>
        </div>

        <div class ="testContainer" id="left">
            <h1>Testing</h1>
        </div>

    </main>
    <footer>

        <img src="../assets/base/Shuriken.png" alt="shuriken" class="shuriken-f1">
        <h1 id="startTreasureHunt">Testing page</h1>
        <img src="../assets/base/Shuriken.png" alt="shuriken" class="shuriken-f2">

    </footer>

        <script>

            const question = document.getElementById("left");
            let button;
            function LeaderBoard(){
                let treasureHuntTableName = document.createElement("h2");

                fetch("https://codecyprus.org/th/test-api/leaderboard?sorted&hasPrize&size=5")
                    .then(response => response.json())
                    .then(jsonObject => {


                        treasureHuntTableName.innerText = jsonObject.treasureHuntName;
                        question.appendChild(treasureHuntTableName);
                        const leaderTable = document.createElement("table");

                        let tableContain = "";

                        leaderTable.innerHTML = "<tr><th>Player Name</th><th>Score</th></tr>";
                        for (let i = 0; i < jsonObject.leaderboard.length; i++){
                            const entry = jsonObject.leaderboard[i];
                            const playerName = entry.player;
                            const score = entry.score;

                            tableContain += "<tr>" +
                                "<td>"+ playerName+"</td>" +
                                "<td>"+ score+"</td>" +
                                "</tr>"
                        }
                        leaderTable.innerHTML += tableContain;

                        question.appendChild(treasureHuntTableName);
                        question.appendChild(leaderTable);

                    });
            }
            function displayList(){

                let listOfTreasure = document.createElement("ol");
                let treasureContain = "";

                fetch("https://codecyprus.org/th/test-api/list?number-of-ths=2")
                    .then(response => response.json())
                    .then(jsonObject => {
                        for (let i = 0; i < jsonObject.treasureHunts.length; i++){
                            let treasureName = jsonObject.treasureHunts[i].description
                            treasureContain += "<li>"+ treasureName +"</li>"
                        }
                        listOfTreasure.innerHTML += treasureContain;
                        question.appendChild(listOfTreasure);

                    });
            }

            function questionType(type){
                fetch("https://codecyprus.org/th/test-api/question?completed&question-type=" + type)
                    .then(response => response.json())
                    .then(jsonObject => {

                        question.innerHTML = jsonObject.questionText + "<br>";
                        buildUI(jsonObject);

                    });
            }

            function buildUI(jsonObject){
                switch (jsonObject.questionType){

                    case "INTEGER":
                        let inputField;
                        inputField = document.createElement("input");
                        inputField.setAttribute('type',"number");
                        inputField.setAttribute('name',"answer");
                        inputField.setAttribute('class',"int");



                        button = document.createElement("button");
                        button.setAttribute("type", "submit");
                        button.innerText = "submit";
                        button.setAttribute("class", "submitButtons");

                        question.appendChild(inputField);
                        question.appendChild(button);

                        break;

                    case "TEXT":
                        let inputText;

                        inputText = document.createElement("textarea");
                        inputText.setAttribute('type',"text");
                        inputText.setAttribute('style',"cols:25,rows:3");
                        inputText.setAttribute('class',"txt");


                        button = document.createElement("button");
                        button.setAttribute("type", "submit");
                        button.setAttribute("class", "submitButtons");
                        button.setAttribute("style","margin-top:2px")
                        button.innerText = "submit";

                        question.appendChild(inputText);
                        question.appendChild(button);

                        break;

                    case "BOOLEAN":
                        let inputRadio1,inputRadio2,label1,label2;
                        inputRadio1 = document.createElement("input");
                        inputRadio1.setAttribute('type',"radio");
                        inputRadio1.setAttribute("name","boolean");
                        inputRadio1.setAttribute("class","bool1");


                        label1 = document.createElement("label");
                        label1.setAttribute("for", "true");
                        label1.setAttribute("class", "bool2");
                        label1.innerText = "True";

                        inputRadio2 = document.createElement("input");
                        inputRadio2.setAttribute('type',"radio");
                        inputRadio2.setAttribute("name","boolean");
                        inputRadio2.setAttribute("class","bool1");


                        label2 = document.createElement("label");
                        label2.setAttribute("for", "false");
                        label2.setAttribute("class", "bool2");
                        label2.innerText = "False";

                        question.appendChild(inputRadio1);
                        question.appendChild(label1);
                        question.appendChild(inputRadio2);
                        question.appendChild(label2);
                        // for (let i = 0; i < 2;i++){
                        //     inputRadio[i] = document.createElement("input");
                        //     inputRadio[i].setAttribute('type',"radio");
                        //     inputRadio[i].setAttribute("name","boolean");
                        //     label[i] = document.createElement("label");
                        //     label[i].setAttribute("for", "true");
                        //     label[i].innerText = "True";
                        //     question.appendChild(inputRadio[i]);
                        //     question.appendChild(label[i]);
                        // }

                        break;
                    case "MCQ":
                        let choice1,choice2,choice3,choice4;

                        choice1 = document.createElement("input");
                        choice1.setAttribute("type","checkbox");
                        choice1.setAttribute("name","MCQ");
                        choice1.setAttribute("class","multi")

                        choice2 = document.createElement("input");
                        choice2.setAttribute("type","checkbox");
                        choice2.setAttribute("name","MCQ");
                        choice2.setAttribute("class","multi")

                        choice3 = document.createElement("input");
                        choice3.setAttribute("type","checkbox");
                        choice3.setAttribute("name","MCQ");
                        choice3.setAttribute("class","multi")

                        choice4 = document.createElement("input");
                        choice4.setAttribute("type","checkbox");
                        choice4.setAttribute("name","MCQ");
                        choice4.setAttribute("class","multi");

                        question.appendChild(choice1);
                        question.appendChild(choice2);
                        question.appendChild(choice3);
                        question.appendChild(choice4);

                        break;
                    case "NUMERIC":
                        let numberInput;

                        numberInput = document.createElement("input");
                        numberInput.setAttribute('type',"number");
                        numberInput.setAttribute('name',"answer");
                        numberInput.setAttribute('class',"numeric");



                        button = document.createElement("button");
                        button.setAttribute("type", "submit");
                        button.innerText = "submit";
                        button.setAttribute("class", "submitButtons");

                        question.appendChild(numberInput);
                        question.appendChild(button);

                        break;

                }
            }

        </script>


    </body>
</html>